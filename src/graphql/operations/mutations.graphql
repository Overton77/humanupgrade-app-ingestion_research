mutation CreateOrganization($input: OrganizationInput!) {
  createOrganization(input: $input) {
    organizationId
    name
    
  }
}

mutation UpdateOrganization($input: UpdateOrganizationInput!) {
  updateOrganization(input: $input) {
    organizationId
    name
    aliases
    orgType
   
  }
}

mutation UpsertResearchPlanRef($input: UpsertResearchPlanRefInput!) {
  upsertResearchPlanRef(input: $input) {
    researchPlanRefId
    mongoPlanId
    label
    version
    validAt
    invalidAt
    expiredAt
    createdAt
    updatedAt
  }
}

mutation UpsertResearchRunRef($input: UpsertResearchRunRefInput!) {
  upsertResearchRunRef(input: $input) {
    researchRunRefId
    mongoRunId
    label
    startedAt
    endedAt
    validAt
    invalidAt
    expiredAt
    createdAt
    updatedAt
    usesPlan {
      researchPlanRef {
        researchPlanRefId
        mongoPlanId
        label
        version
        validAt
        invalidAt
        expiredAt
        createdAt
        updatedAt
      }
      validAt
      invalidAt
      expiredAt
      createdAt
    }
  }
}

mutation LinkResearchRunUsesPlan($input: LinkResearchRunUsesPlanInput!) {
  linkResearchRunUsesPlan(input: $input) {
    researchRunRefId
    mongoRunId
    label
    startedAt
    endedAt
    validAt
    invalidAt
    expiredAt
    createdAt
    updatedAt
    usesPlan {
      researchPlanRef {
        researchPlanRefId
        mongoPlanId
        label
        version
        validAt
        invalidAt
        expiredAt
        createdAt
        updatedAt
      }
      validAt
      invalidAt
      expiredAt
      createdAt
    }
  }
}

mutation UpsertDocument($input: UpsertDocumentInput!) {
  upsertDocument(input: $input) {
    documentId
    documentKey
    type
    title
    url
    publishedAt
    retrievedAt
    validAt
    invalidAt
    expiredAt
    createdAt
    updatedAt
    searchText
    searchTextEmbedding
    searchTextModel
    searchTextVersion
    searchTextUpdatedAt
    hasTextVersion {
      documentTextVersion {
        documentTextVersionId
        textVersionHash
        source
        language
        text
        validAt
        invalidAt
        expiredAt
        createdAt
        updatedAt
        searchText
        searchTextEmbedding
        searchTextModel
        searchTextVersion
        searchTextUpdatedAt
      }
      validAt
      invalidAt
      expiredAt
      createdAt
    }
    chunks {
      chunk {
        chunkId
        chunkKey
        index
        text
        charStart
        charEnd
        startMs
        endMs
        embedding
        embeddingModel
        embeddingVersion
        validAt
        invalidAt
        expiredAt
        createdAt
        updatedAt
      }
      validAt
      invalidAt
      expiredAt
      createdAt
    }
    generatedBy {
      researchRunRef {
        researchRunRefId
        mongoRunId
        label
        startedAt
        endedAt
        validAt
        invalidAt
        expiredAt
        createdAt
        updatedAt
      }
      operation
      stageKey
      subStageKey
      extractorVersion
      extractedAt
      validAt
      invalidAt
      expiredAt
      createdAt
    }
  }
}

mutation UpsertDocumentTextVersionBundle($input: UpsertDocumentTextVersionBundleInput!) {
  upsertDocumentTextVersionBundle(input: $input) {
    documentId
    documentTextVersionId
    segmentationId
    chunkMetas {
      chunkId
      chunkKey
      index
    }
    nextChunkEdgesCreated
  }
}

mutation UpsertEvidenceEdge($input: EvidenceEdgeInput!) {
  upsertEvidenceEdge(input: $input) {
    ok
    edgeType
    relKey
    relationshipId
    source {
      ... on EvidenceSourceRefDocumentResult {
        kind
        documentId
      }
      ... on EvidenceSourceRefChunkResult {
        kind
        chunkId
      }
    }
    target {
      nodeId
      label
      uniqueKey
      uniqueKeyValue
    }
    created
    updated
  }
}

mutation UpsertEvidenceEdges($input: [UpsertEvidenceEdgesInput!]!) {
  upsertEvidenceEdges(input: $input) {
    ok
    counts {
      received
      attempted
      created
      updated
      failed
    }
    results {
      ok
      edgeType
      relKey
      relationshipId
      source {
        ... on EvidenceSourceRefDocumentResult {
          kind
          documentId
        }
        ... on EvidenceSourceRefChunkResult {
          kind
          chunkId
        }
      }
      target {
        nodeId
        label
        uniqueKey
        uniqueKeyValue
      }
      created
      updated
    }
    errors {
      index
      edgeType
      message
      code
    }
  }
}
